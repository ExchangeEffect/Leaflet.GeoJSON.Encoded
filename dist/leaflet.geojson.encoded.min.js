(function(){L.GeoJSON.Encoded=L.GeoJSON.extend({initialize:function(a,b){L.GeoJSON.prototype.initialize.call(this,a,b)},defaultOptions:function(a){return a="number"==typeof a?{precision:a}:a||{},a.precision=a.precision||5,a.factor=a.factor||Math.pow(10,a.precision),a.dimension=a.dimension||2,a},_decodeFeature:function(a){function b(a){for(var b=[],c=0;c<a.length;c++)b.push(g.decode(a[c]));return b}function c(a){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c}var d,e,f,g=this;switch(d=a.geometry.coordinates,a.geometry.type){case"Point":f=L.marker([d[1],d[0]]);break;case"LineString":e=L.Util.isArray(d[0])?L.GeoJSON.coordsToLatLngs(d,0):b(d[0])[0],f=L.polyline(e);break;case"MultiLineString":e=L.Util.isArray(d[0][0])?L.GeoJSON.coordsToLatLngs(d,1):b(d),f=L.multiPolyline(e);break;case"Polygon":e=L.Util.isArray(d[0][0])?L.GeoJSON.coordsToLatLngs(d,1):b(d),f=L.polygon(e);break;case"MultiPolygon":e=L.Util.isArray(d[0][0])?L.GeoJSON.coordsToLatLngs(d,2):c(d),f=L.multiPolygon(e)}return f.toGeoJSON()},addData:function(a){var b,c,d,e=L.Util.isArray(a)?a:a.features;if(e){for(b=0,c=e.length;c>b;b++)d=this._decodeFeature(e[b]),(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var f=this.options;if(f.filter&&!f.filter(a))return this;var g=L.GeoJSON.geometryToLayer(a,f);return g.feature=L.GeoJSON.asFeature(a),g.defaultOptions=g.options,this.resetStyle(g),f.onEachFeature&&f.onEachFeature(a,g),this.addLayer(g)}}),L.GeoJSON.Encoded.include({decode:function(a,b){b=this.defaultOptions(b);for(var c=this.decodeDeltas(a,b),d=[],e=0,f=c.length;e+(b.dimension-1)<f;){for(var g=[],h=0;h<b.dimension;++h)g.push(c[e++]);d.push(g)}return d},decodeDeltas:function(a,b){b=this.defaultOptions(b);for(var c=this.decodeFloats(a,b),d=[],e=0,f=c.length;f>e;)for(var g=0;g<b.dimension;++g,++e)c[e]=Math.round((d[g]=c[e]+(d[g]||0))*b.factor)/b.factor;return c},decodeFloats:function(a,b){b=this.defaultOptions(b);for(var c=this.decodeSignedIntegers(a),d=0,e=c.length;e>d;++d)c[d]/=b.factor;return c},decodeSignedIntegers:function(a){for(var b=this.decodeUnsignedIntegers(a),c=0,d=b.length;d>c;++c)b[c]=1&b[c]?~(b[c]>>1):b[c]>>1;return b},decodeUnsignedIntegers:function(a){for(var b=[],c=0,d=0,e=0,f=a.length;f>e;++e){var g=a.charCodeAt(e)-63;c|=(31&g)<<d,32>g?(b.push(c),c=0,d=0):d+=5}return b}}),L.geoJson.encoded=function(a,b){return new L.GeoJSON.Encoded(a,b)}}).call(this);